<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Nashik KBC Ultimate</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body{
margin:0;
font-family:Segoe UI;
background:radial-gradient(circle,#140033,#000);
color:white;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}
#game{
width:90%;
max-width:750px;
background:rgba(255,255,255,0.08);
padding:25px;
border-radius:20px;
box-shadow:0 0 30px #7928ca;
}
h1{text-align:center;color:#ffd700;}
#score{color:#00ffcc;font-size:20px;}
#question{font-size:24px;margin:20px 0;min-height:70px;}

.options{
display:grid;
grid-template-columns:1fr 1fr;
gap:12px;
}
.option{
background:linear-gradient(45deg,#7928ca,#ff0080);
border:none;
padding:15px;
border-radius:12px;
color:white;
font-size:18px;
cursor:pointer;
}
.option.correct{background:#00c853;}
.option.wrong{background:#d50000;}

#controls{
margin-top:15px;
display:flex;
justify-content:space-between;
}
button{
padding:10px 18px;
border:none;
border-radius:20px;
font-weight:bold;
cursor:pointer;
}
.lifeline{background:#00b0ff;color:white;}
#nextBtn{background:#ffd700;color:black;display:none;}

#pollBox{
margin-top:10px;
color:#ffd700;
}
</style>
</head>
<body>

<div id="game">
<h1>ðŸŸ¡ Nashik KBC</h1>
<div id="score">Score: 0</div>
<div id="question">Loading...</div>

<div class="options">
<button class="option" onclick="selectOption(0)"></button>
<button class="option" onclick="selectOption(1)"></button>
<button class="option" onclick="selectOption(2)"></button>
<button class="option" onclick="selectOption(3)"></button>
</div>

<div id="controls">
<div>
<button class="lifeline" onclick="use5050()">50:50</button>
<button class="lifeline" onclick="audiencePoll()">Audience</button>
</div>
<button id="nextBtn" onclick="nextQuestion()">Next</button>
</div>

<div id="pollBox"></div>
</div>

<!-- Soft Suspense Music -->
<audio id="bgMusic" loop>
<source src="https://assets.mixkit.co/music/preview/mixkit-mysterious-suspense-116.mp3" type="audio/mpeg">
</audio>

<script>
// ================= MUSIC =================
const music = document.getElementById("bgMusic");
document.body.addEventListener("click",()=>{
music.volume = 0.25;
music.play().catch(()=>{});
},{once:true});

// ================= VOICE (Deep male style) =================
let voices = [];
speechSynthesis.onvoiceschanged = ()=>{
voices = speechSynthesis.getVoices();
};

function speak(text){
speechSynthesis.cancel();
let msg = new SpeechSynthesisUtterance(text);

let voice =
voices.find(v=>v.name.toLowerCase().includes("male") && v.lang.includes("en")) ||
voices.find(v=>v.lang.includes("en-IN")) ||
voices.find(v=>v.lang.includes("en")) ||
voices[0];

if(voice){
msg.voice = voice;
msg.lang = voice.lang;
}

msg.rate = 0.75;
msg.pitch = 0.6;
speechSynthesis.speak(msg);
}

// ================= QUESTIONS (No repeat) =================
const quiz = [
{q:"Nashik is located on which river?",options:["Godavari","Krishna","Narmada","Tapti"],ans:0},
{q:"Nashik is famous for which event every 12 years?",options:["Kumbh Mela","Pushkar Fair","Durga Puja","Onam"],ans:0},
{q:"Which crop is Nashik famous for?",options:["Tea","Grapes","Rice","Cotton"],ans:1},
{q:"Which planet is largest?",options:["Mars","Earth","Jupiter","Saturn"],ans:2},
{q:"Capital of India?",options:["Mumbai","Delhi","New Delhi","Pune"],ans:2},
{q:"How many continents are there?",options:["5","6","7","8"],ans:2},
{q:"Father of Nation?",options:["Gandhi","Nehru","Bose","Patel"],ans:0},
{q:"Which gas do plants absorb?",options:["Oxygen","Nitrogen","Carbon dioxide","Hydrogen"],ans:2},
{q:"India independence year?",options:["1945","1946","1947","1950"],ans:2},
{q:"Which mission landed on Moon south pole?",options:["Chandrayaan 1","Chandrayaan 2","Chandrayaan 3","Mangalyaan"],ans:2},
{q:"UPI is used for?",options:["Messaging","Payments","Gaming","Shopping only"],ans:1},
{q:"National animal of India?",options:["Lion","Tiger","Elephant","Leopard"],ans:1},
{q:"Largest ocean?",options:["Atlantic","Indian","Pacific","Arctic"],ans:2},
{q:"Which is fastest land animal?",options:["Lion","Cheetah","Horse","Tiger"],ans:1},
{q:"Festival of lights?",options:["Holi","Diwali","Eid","Pongal"],ans:1},
{q:"Currency of India?",options:["Rupee","Dollar","Euro","Yen"],ans:0},
{q:"Which device is computer brain?",options:["RAM","CPU","Hard disk","GPU"],ans:1},
{q:"AI stands for?",options:["Auto Internet","Artificial Intelligence","Advanced Input","None"],ans:1},
{q:"Sun is a?",options:["Planet","Star","Asteroid","Galaxy"],ans:1},
{q:"Which city is wine capital of India?",options:["Nashik","Pune","Goa","Delhi"],ans:0}
];

let remaining = [...quiz];
let currentQ;
let score = 0;
let locked = false;

const qEl = document.getElementById("question");
const opts = document.querySelectorAll(".option");
const scoreEl = document.getElementById("score");
const nextBtn = document.getElementById("nextBtn");
const pollBox = document.getElementById("pollBox");

// ================= LOAD QUESTION =================
function loadQuestion(){
locked = false;
pollBox.innerHTML="";
nextBtn.style.display="none";

opts.forEach(o=>{
o.style.display="block";
o.disabled=false;
o.className="option";
});

if(remaining.length===0){
qEl.innerText="Game Over! Final Score: "+score;
speak("You have completed all questions. Your final score is "+score);
opts.forEach(o=>o.style.display="none");
return;
}

let index = Math.floor(Math.random()*remaining.length);
currentQ = remaining[index];
remaining.splice(index,1);

qEl.innerText = currentQ.q;
opts.forEach((o,i)=>o.innerText=currentQ.options[i]);

music.play();
speak("Here is your next question.");
speak(currentQ.q);
}

loadQuestion();

// ================= ANSWER =================
function selectOption(i){
if(locked) return;
locked = true;
music.pause();

opts.forEach(o=>o.disabled=true);

if(i===currentQ.ans){
opts[i].classList.add("correct");
score++;
scoreEl.innerText="Score: "+score;
confetti({particleCount:120,spread:70});
speak("Computer, lock the answer. That is absolutely correct.");
}else{
opts[i].classList.add("wrong");
opts[currentQ.ans].classList.add("correct");
speak("Computer, lock the answer. That is incorrect.");
}

nextBtn.style.display="block";
}

function nextQuestion(){
loadQuestion();
}

// ================= LIFELINES =================
let used5050=false;
let usedPoll=false;

function use5050(){
if(used5050) return;
used5050=true;

let removed=0;
opts.forEach((o,i)=>{
if(i!==currentQ.ans && removed<2){
o.style.display="none";
removed++;
}
});
}

function audiencePoll(){
if(usedPoll) return;
usedPoll=true;

pollBox.innerHTML="Audience Poll:<br>";
for(let i=0;i<4;i++){
let percent = (i===currentQ.ans)
? Math.floor(Math.random()*30)+50
: Math.floor(Math.random()*20)+5;

pollBox.innerHTML += currentQ.options[i]+" - "+percent+"%<br>";
}
}
</script>

</body>
</html>
