<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>KBC English Quiz</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background: radial-gradient(circle,#000428,#004e92);
    color:white;
    text-align:center;
}
.container{
    max-width:900px;
    margin:auto;
    padding:20px;
}
h1{color:#ffd700;}

#questionBox{
    background:#001f54;
    padding:25px;
    border-radius:15px;
    font-size:24px;
    margin:25px 0;
}

.options{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:15px;
}

.option{
    background:#0b3d91;
    padding:18px;
    border-radius:12px;
    font-size:18px;
    cursor:pointer;
}
.correct{background:#00c853 !important;}
.wrong{background:#d50000 !important;}

#startBtn{
    padding:15px 40px;
    font-size:22px;
    background:#ffd700;
    border:none;
    border-radius:10px;
    cursor:pointer;
}

#score{
    margin-top:20px;
    font-size:22px;
    color:#ffd700;
}
</style>
</head>
<body>

<div class="container">
<h1>KBC Quiz</h1>

<button id="startBtn">Start Game</button>

<div id="questionBox" style="display:none;"></div>
<div class="options" id="options"></div>
<div id="score">Score: 0</div>
</div>

<!-- Suspense Music -->
<audio id="bgMusic" loop>
<source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_8b5a7b6d0c.mp3">
</audio>

<script>
// ---------------- QUESTIONS ----------------
let questions = [
{q:"Which river flows through Nashik?", o:["Ganga","Godavari","Yamuna","Krishna"], a:1},
{q:"Wine capital of India?", o:["Nashik","Pune","Delhi","Jaipur"], a:0},
{q:"Capital of Maharashtra?", o:["Mumbai","Pune","Nagpur","Nashik"], a:0},
{q:"Largest planet?", o:["Earth","Mars","Jupiter","Venus"], a:2},
{q:"Fastest land animal?", o:["Tiger","Cheetah","Horse","Dog"], a:1},
{q:"National animal of India?", o:["Lion","Tiger","Elephant","Leopard"], a:1}
];

questions.sort(()=>Math.random()-0.5);

// ---------------- MUSIC ----------------
const music=document.getElementById("bgMusic");

// ---------------- VOICE ----------------
let voices=[];
function loadVoices(){
    voices = speechSynthesis.getVoices();
}
loadVoices();
speechSynthesis.onvoiceschanged = loadVoices;

function getVoice(){
    return (
        voices.find(v=>v.name.includes("George")) ||
        voices.find(v=>v.lang==="en-GB") ||
        voices.find(v=>v.lang==="en-IN") ||
        voices.find(v=>v.lang.startsWith("en")) ||
        voices[0]
    );
}

function speak(text, callback){
    speechSynthesis.cancel();
    let msg = new SpeechSynthesisUtterance(text);
    msg.voice = getVoice();
    msg.rate = 0.75;
    msg.pitch = 0.6;
    msg.volume = 1;

    msg.onend = ()=>{
        if(callback) callback();
    };

    speechSynthesis.speak(msg);
}

// ---------------- GAME ----------------
let index=0;
let score=0;
let locked=false;

const startBtn=document.getElementById("startBtn");
const qBox=document.getElementById("questionBox");
const optBox=document.getElementById("options");
const scoreBox=document.getElementById("score");

startBtn.onclick=()=>{
    startBtn.style.display="none";
    qBox.style.display="block";
    music.volume=0.35;
    music.play().catch(()=>{});
    loadQuestion();
};

function loadQuestion(){
    locked=false;

    if(index>=questions.length){
        qBox.innerText="Game Over! Score: "+score;
        optBox.innerHTML="";
        music.pause();
        speak("Game over. Your final score is " + score);
        return;
    }

    let q=questions[index];
    qBox.innerText=q.q;
    optBox.innerHTML="";

    speak("Here is your question. " + q.q);

    q.o.forEach((opt,i)=>{
        let btn=document.createElement("div");
        btn.className="option";
        btn.innerText=opt;
        btn.onclick=()=>selectAnswer(btn,i);
        optBox.appendChild(btn);
    });
}

function selectAnswer(btn,i){
    if(locked) return;
    locked=true;
    music.pause();

    let q=questions[index];
    let correctIndex=q.a;
    let correctAnswer=q.o[correctIndex];
    let options=document.getElementsByClassName("option");

    if(i===correctIndex){
        btn.classList.add("correct");
        score++;
    }else{
        btn.classList.add("wrong");
        options[correctIndex].classList.add("correct");
    }

    scoreBox.innerText="Score: "+score;

    // English KBC Drama
    speak("Computer, please lock the answer.", ()=>{
        setTimeout(()=>{
            if(i===correctIndex){
                speak("That is absolutely correct.", nextQuestion);
            }else{
                speak("That is incorrect. The correct answer is " + correctAnswer, nextQuestion);
            }
        },800);
    });
}

function nextQuestion(){
    setTimeout(()=>{
        index++;
        music.play();
        loadQuestion();
    },1200);
}
</script>

</body>
</html>
