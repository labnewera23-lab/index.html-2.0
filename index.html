<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>KBC Nashik Edition</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#000814;
    color:white;
    text-align:center;
}

h1{
    color:#ffd60a;
    margin-top:10px;
}

#game{
    max-width:700px;
    margin:auto;
    padding:20px;
}

#question{
    font-size:24px;
    margin:30px 0;
    min-height:80px;
}

.option{
    background:#001d3d;
    border:2px solid #ffd60a;
    padding:15px;
    margin:10px;
    border-radius:12px;
    cursor:pointer;
    font-size:18px;
    transition:0.3s;
}

.option:hover{
    background:#003566;
}

.correct{
    background:green !important;
}

.wrong{
    background:red !important;
}

#status{
    font-size:20px;
    margin-top:20px;
    color:#ffd60a;
}

button{
    padding:12px 30px;
    font-size:18px;
    border:none;
    border-radius:10px;
    background:#ffd60a;
    cursor:pointer;
}
</style>
</head>

<body>

<h1>ðŸŽ¤ KBC Nashik Edition</h1>

<div id="game">
    <div id="question">Press Start</div>
    <div id="options"></div>
    <div id="status"></div>
    <button onclick="startGame()">Start Game</button>
</div>

<!-- Suspense Music -->
<audio id="bgm" loop>
<source src="https://cdn.pixabay.com/audio/2022/10/25/audio_4f4bba3c5a.mp3">
</audio>
<script>
// Deep Male Voice
function speak(text){
    let speech = new SpeechSynthesisUtterance(text);
    speech.rate = 0.9;
    speech.pitch = 0.7;

    let voices = speechSynthesis.getVoices();
    let maleVoice = voices.find(v => v.name.toLowerCase().includes("male") || v.name.toLowerCase().includes("david") || v.name.toLowerCase().includes("english"));
    if(maleVoice) speech.voice = maleVoice;

    speechSynthesis.cancel();
    speechSynthesis.speak(speech);
}

// Shuffle helper
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

let current = 0;
let used = [];

function startGame(){
    document.querySelector("button").style.display="none";
    document.getElementById("bgm").play();
    nextQuestion();
}

function nextQuestion(){
    if(used.length === questions.length){
        speak("Congratulations. You have completed all questions.");
        document.getElementById("question").innerText="Game Completed!";
        return;
    }

    let index;
    do{
        index = Math.floor(Math.random()*questions.length);
    }while(used.includes(index));

    used.push(index);
    current = index;

    let q = questions[index];

    // Shuffle options and track correct answer
    let opts = q.options.map((opt, idx)=>({text: opt, correct: idx === q.answer}));
    shuffleArray(opts);

    document.getElementById("question").innerText = q.q;
    document.getElementById("status").innerText = "";

    let optionsHTML = "";
    opts.forEach((opt,i)=>{
        optionsHTML += `<div class="option" onclick="selectAnswerShuffled(${i}, this, ${opts.map(o=>o.correct)})">${opt.text}</div>`;
    });
    document.getElementById("options").innerHTML = optionsHTML;

    speak(q.q);
}

function selectAnswerShuffled(i, element, correctArray){
    let options = document.querySelectorAll(".option");
    options.forEach(o=>o.onclick=null);

    if(correctArray[i]){
        element.classList.add("correct");
        document.getElementById("status").innerText="Correct Answer!";
        speak("Computer ji, lock kiya jaye. That is the correct answer.");
    }else{
        element.classList.add("wrong");
        options[correctArray.indexOf(true)].classList.add("correct");
        document.getElementById("status").innerText="Wrong Answer!";
        speak("That is the wrong answer.");
    }

    setTimeout(nextQuestion, 4000);
}
</script>
</body>
</html>
